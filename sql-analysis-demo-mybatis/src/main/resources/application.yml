server:
  port: 8087

spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test?useSSL=false&serverTimezone=UTC
    username: root
    password: abc123
    driver-class-name: com.mysql.cj.jdbc.Driver
  sql:
    init:
      mode: always

logging:
  level:
    com.linyi.sql.insight: DEBUG

sql:
  analysis:
    enabled: true
    # 基础
    max-sql-length: 20000
    sampling-rate: 1.0 # 100% 采样
    only-check-once: false
    check-interval-ms: 300000
    # EXPLAIN 与评分输出
    async-enabled: true
    async-pool-size: 4
    output-model: LOG # LOG | HTTP | MQ | CUSTOM
    # output-endpoint: http://localhost:8081/sql-insight   # HTTP/MQ 参数
    # output-class: com.example.CustomOutService           # 自定义实现
    # 规则
    rule-loader: FILE # DEFAULT | FILE | HTTP
    rule-file: classpath:sql-analysis-rules.properties
    # rule-http-url: http://host/rules.properties
    # UI（可选）
    ui-enabled: true # 开启页面 /sql-analyzer 与 SSE 实时推送
    # SQL 重写（可选）
    rewrite-enabled: true
    rewrite-max-limit: 5000 # 将 "limit N" 超过 N 的查询收敛为 N
    # 过滤（可选）
    allow-sql-types: [SELECT, UPDATE, DELETE]
    deny-sql-types: []
    whitelist-sql-id-contains: []
    blacklist-sql-id-contains: []
